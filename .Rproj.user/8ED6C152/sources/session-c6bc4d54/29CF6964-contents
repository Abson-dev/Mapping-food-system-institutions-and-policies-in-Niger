---
title: "Exercice 1"
author: "Aboubacar HEMA"
date: "2/11/2022"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Exercise 1: Questionnaire Design (30 points)


1.	Import these two datasets in the software you are using. Make sure you have the right variable types. 


Importation of **test_data_Exercise_2_en** dataset.


```{r}
library(readr)
test_data_Exercise_2_en <- read_delim("test_data_Exercise_2_en.csv", 
    ";", escape_double = FALSE, na = "null", 
    trim_ws = TRUE)
#View(test_data_Exercise_2_en)

data1<-test_data_Exercise_2_en
```

```{r message=F, warning=F}

test_data_Exercise_2_xml <- read_delim("test_data_Exercise_2_xml.csv", 
    ";", escape_double = FALSE, na = "null", 
    trim_ws = TRUE)
#View(test_data_Exercise_2_xml)

data2<-test_data_Exercise_2_xml
```

2.	Calculate the duration of the survey for each observation and give mean and median of the duration. 

We compute the duration in days.

```{r}
library(dplyr) # for data wrangling
library(lubridate) # for date
data2 <- data2 %>% 
  mutate(end_ymd=ymd(as.Date(end)),
         start_ymd=ymd(as.Date(start))) %>% 
  mutate(duration=end_ymd-start_ymd)

# Mean of the duration

mean(data2$duration)
  
# Median of the duration

median(data2$duration)
  


```


3.	Attribute the variable names of the XML version of the dataset (“test_data_Exercise_2_xml.csv”) to the English version (“test_data_Exercise_2_en.csv”). 	

```{r}
names(test_data_Exercise_2_en)<-names(test_data_Exercise_2_xml)
```



4.	Using the right version (English or XML), find observations with data collected non consistent with the background data for each of the background variables. 

```{r}

#hh_sex_b
df1<-test_data_Exercise_2_en %>% 
  filter(hh_sex_b!=hh_sex)
#hh_yob_b
df2 <- test_data_Exercise_2_en %>% 
  filter(hh_yob_b!=hh_yob)

#sex_b
df3 <- test_data_Exercise_2_en %>% 
  filter(sex_b!=sex)

#yob_b
df4 <- test_data_Exercise_2_en %>% 
  filter(yob_b!=yob)
```


5.	Create a dataset of non-consistent observations combining all the background variables. 

```{r}
df <- rbind(df1,df2,df3,df4)
```

